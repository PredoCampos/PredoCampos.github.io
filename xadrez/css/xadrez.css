/**
 * @file xadrez.css
 * @description Estilos para padrão de xadrez.
 * @version 1.0.0
 */

*,
*::before,
*::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --color-page-background: hsl(0, 0%, 10%);
    --color-tile: hsla(0, 0%, 100%, 0.15);
    --color-footer-foreground: hsl(0, 0%, 100%);
    --color-footer-background: hsl(0, 0%, 0%);
    --color-footer-stroke: hsl(0, 0%, 100%);

    --tile-size: clamp(2.1875rem, 5vmin, 4.6875rem);
    --footer-height: 20vh;

    --footer-stroke-width-ratio: 0.04;
    --footer-offset-x-ratio: 0.06;
    --footer-offset-y-ratio: 0.12;

    --stroke-width: calc(var(--tile-size) * var(--footer-stroke-width-ratio));
    --offset-x: calc(var(--tile-size) * var(--footer-offset-x-ratio));
    --offset-y: calc(var(--tile-size) * var(--footer-offset-y-ratio));

    --z-background: 0;
    --z-grid: 1;
    --z-footer: 2;
    --z-ui: 3;

    --cursor-default: url('../../assets/images/xadrez/mouse.svg') 14 15, auto;
    --cursor-click: url('../../assets/images/xadrez/mouse-click.svg') 14 15, auto;
}

@font-face {
    font-family: 'Aktiv Grotesk Black Italic';
    src: url('../../assets/fonts/Aktiv Grotesk/OTF/AktivGrotesk-BlackItalic.otf') format('opentype');
}

html, body {
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    margin: 0;
    padding: 0;
}

body {
    background-color: var(--color-page-background);
    position: relative;
    cursor: var(--cursor-default) !important;
}

body:active {
    cursor: var(--cursor-click) !important;
}

body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: linear-gradient(
        135deg,
        hsla(0, 0%, 100%, 0.15) 0%,
        hsla(0, 0%, 100%, 0.08) 25%,
        transparent 45%
    );
    z-index: var(--z-background);
}

footer {
    position: fixed;
    bottom: -5vh;
    left: 0;
    width: 100vw;
    height: var(--footer-height);
    z-index: var(--z-footer);
    transform: rotate(-3deg) scale(1.1);
    transform-origin: center bottom;
}

footer svg {
    width: 100vw;
    height: 100vh;
    pointer-events: none;
    display: block;
}

#footer-background {
    fill: var(--color-footer-background);
    stroke: var(--color-footer-stroke);
    stroke-linejoin: round;
    stroke-linecap: round;
    stroke-width: var(--stroke-width);
    transform: translateX(var(--offset-x)) translateY(calc(var(--offset-y) * -1));
}

#footer-foreground {
    fill: var(--color-footer-foreground);
    stroke: none;
    transform: translate(0, 0);
}

.infinite-grid {
    position: absolute;
    top: 40%;
    left: 20%;
    width: 250vmax;
    height: 250vmax;
    z-index: var(--z-grid);
    overflow: hidden;
    transform: translate(-50%, -50%) rotate(78deg);
    transform-origin: center;
}

.ripple {
    position: fixed;
    border-radius: 50%;
    border: 2px solid hsla(0, 0%, 0%, 0.952);
    animation: ripple-effect 0.7s ease-out;
    pointer-events: none;
    transform: translate(-50%, -50%); 
    z-index: var(--z-ui); 
}

@keyframes ripple-effect {
    from {
        width: 0;
        height: 0;
        opacity: 1;
    }
    to {
        width: 150px;
        height: 150px;
        opacity: 0;
    }
}

/*-------------------------------------------*\
    $MENU DE NAVEGAÇÃO (v3 - Generativo)
\*-------------------------------------------*/

.main-nav {
    position: fixed;
    top: 35%; 
    left: 5vw;
    /* A inclinação da "coluna" principal mantém-se */
    transform: rotate(-3deg);
    transform-origin: left center;
    z-index: var(--z-ui);
}

.main-nav ul {
    list-style: none;
    margin: 0;
    padding: 0;
}

.main-nav li {
    position: relative;
    padding: 1rem 0; /* Aumentamos o espaçamento para a aleatoriedade */
}

.main-nav a {
    display: inline-block; /* Importante para que a rotação funcione bem */
    color: var(--color-footer-foreground);
    text-decoration: none;
    font-family: 'Aktiv Grotesk Black Italic', sans-serif;
    font-size: 4.5rem;
    
    /* Posição relativa e z-index para garantir que o texto fique ACIMA do triângulo */
    position: relative;
    z-index: 2;
    
    /* A transição agora não inclui o transform, pois ele é definido pelo JS */
    transition: color 0.3s ease;
}

/* --- ESTILO DO TRIÂNGULO (AGORA ATRÁS DO TEXTO) --- */

.main-nav li::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%); /* Centraliza o triângulo no LI */
    
    /* O triângulo agora é maior e sólido, para servir de fundo */
    width: 0;
    height: 0;
    border-style: solid;
    border-width: 0 90px 150px 90px; /* Aumentamos o tamanho */
    border-color: transparent transparent hsl(45, 100%, 70%) transparent; /* Cor amarela */
    
    /* O triângulo fica numa camada abaixo do texto (<a>) */
    z-index: 1;
    
    /* Efeito de surgimento */
    opacity: 0;
    transition: opacity 0.4s ease;
}

/* --- ESTADO "SELECIONADO" --- */

/* Quando o LI tiver a classe .selected, o triângulo (fundo) aparece */
.main-nav li.selected::before {
    opacity: 1;
}

/* Quando o LI tiver a classe .selected, o link (<a>) muda de cor */
.main-nav li.selected a {
    color: var(--color-page-background); /* Cor de texto escura para contrastar com o fundo amarelo */
}